<!DOCTYPE html>
<html>
  <head>
    <title>Demo Amazon Project</title>

    <!-- This code is needed for responsive design to work.
      (Responsive design = make the website look good on
      smaller screen sizes like a phone or a tablet). -->
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1" />

    <!-- Load a font called Roboto from Google Fonts. -->
    <link
      rel="preconnect"
      href="https://fonts.googleapis.com" />
    <link
      rel="preconnect"
      href="https://fonts.gstatic.com"
      crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap"
      rel="stylesheet" />

    <!-- Here are the CSS files for this page. -->
    <link
      rel="stylesheet"
      href="styles/shared/general.css" />
    <link
      rel="stylesheet"
      href="styles/shared/amazon-header.css" />
    <link
      rel="stylesheet"
      href="styles/pages/amazon.css" />
  </head>
  <body>
    <div class="amazon-header">
      <div class="amazon-header-left-section">
        <a
          href="amazon.html"
          class="header-link">
          <img
            class="amazon-logo"
            src="images/amazon-logo-white.png" />
          <img
            class="amazon-mobile-logo"
            src="images/amazon-mobile-logo-white.png" />
        </a>
      </div>

      <div class="amazon-header-middle-section">
        <input
          class="search-bar"
          type="text"
          placeholder="Search" />

        <button class="search-button">
          <img
            class="search-icon"
            src="images/icons/search-icon.png" />
        </button>
      </div>

      <div class="amazon-header-right-section">
        <a class="orders-link grading">
          <span class="returns-text-name">Hello</span>
        </a>
        <a
          class="orders-link header-link"
          href="orders.html">
          <span class="returns-text">Returns</span>
          <span class="orders-text">& Orders</span>
        </a>

        <a
          class="cart-link header-link"
          href="checkout.html">
          <img
            class="cart-icon"
            src="images/icons/cart-icon.png" />
          <div class="cart-quantity js-cart-quantity">0</div>
          <div class="cart-text">Cart</div>
        </a>
      </div>
    </div>

    <div class="main">
      <div class="products-grid js-product-grid"></div>
    </div>
    <script
      type="module"
      src="scripts/amazon.js"></script>
    <script>
      // Retrieve the token from localStorage
      const token = localStorage.getItem('authToken'); // Replace 'authToken' with the key you used to store the token

      if (token) {
        // Decode the token to extract the username or name from the payload
        const decodedToken = JSON.parse(atob(token.split('.')[1])); // Base64 decode the token to get the payload
        const userName = decodedToken.sub || 'User'; // Use the name you have in your token payload, for example: 'firstName'

        // Modify the content of the span element
        const spanElement = document.querySelector('.returns-text-name');
        spanElement.textContent = `Hello ${userName} :) `;
      } else {
        console.log('No token found');
      }
    </script>
  </body>
</html>
